import{_ as z,r as i,c as C,w as a,a as t,u as A,o as y,b as o,e as b,t as V,d as E,f as D,F as M,n as $}from"./index-C2aYM6LG.js";import{u as G}from"./usuario_store-DxkInh7o.js";import"./http-CD2YnwdB.js";const H={__name:"LoginView",setup(J){const x=A(),k=G(),c=i(""),v=i(""),d=i(""),m=i(""),p=i(""),l=i(""),n=i(""),s=i(!1);async function R(){if(l.value="",n.value="",!d.value||!m.value||!p.value||!c.value||!v.value){l.value="Todos los campos son obligatorios",n.value="error";return}try{const u={nombre:d.value,apellidos:m.value,telefono:p.value,usuario:c.value,contrasenia:v.value},e=await k.registrarUsuario(u);l.value=e.mensaje||"Registro exitoso",n.value="success",w(),s.value=!1}catch(u){console.error("Error en registro:",u),l.value=u.mensaje||u||"Error en el registro",n.value="error"}}async function S(){var u;if(l.value="",n.value="",!c.value||!v.value){l.value="Usuario y contraseña son obligatorios",n.value="error";return}try{const e={usuario:c.value,contrasenia:v.value},_=await k.login(e);l.value=_.mensaje||"Inicio de sesión exitoso",n.value="success";const g=((u=_.usuario)==null?void 0:u.tipo_usuario)||"usuario";localStorage.setItem("tipo_usuario",g),localStorage.setItem("token",_.token),setTimeout(()=>{g==="empleado"?x.push({name:"BienvenidaEmpleado"}):x.push({name:"bienvenida"})},1e3)}catch(e){console.error("Error en login:",e),l.value=e.mensaje||e||"Error al iniciar sesión",n.value="error"}}function I(){s.value=!s.value,w(),l.value=""}function w(){c.value="",v.value="",d.value="",m.value="",p.value=""}return(u,e)=>{const _=t("v-toolbar-title"),g=t("v-toolbar"),q=t("v-alert"),f=t("v-text-field"),N=t("v-card-text"),U=t("v-btn"),j=t("v-card-actions"),B=t("v-card"),T=t("v-col"),F=t("v-row"),L=t("v-container");return y(),C(L,{class:"fill-height",fluid:""},{default:a(()=>[o(F,{justify:"center",align:"center"},{default:a(()=>[o(T,{cols:"12",sm:"8",md:"4"},{default:a(()=>[o(B,{elevation:"12",class:"pa-6"},{default:a(()=>[o(g,{flat:"",color:"primary",dark:""},{default:a(()=>[o(_,null,{default:a(()=>[b(V(s.value?"Registro de Usuario":"Iniciar Sesión"),1)]),_:1})]),_:1}),o(N,null,{default:a(()=>[l.value?(y(),C(q,{key:0,type:n.value,dense:"",text:""},{default:a(()=>[b(V(l.value),1)]),_:1},8,["type"])):E("",!0),s.value?(y(),D(M,{key:1},[o(f,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),label:"Nombre","prepend-icon":"mdi-account",required:"",class:"mt-4"},null,8,["modelValue"]),o(f,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=r=>m.value=r),label:"Apellidos","prepend-icon":"mdi-account-multiple",required:""},null,8,["modelValue"]),o(f,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=r=>p.value=r),label:"Teléfono","prepend-icon":"mdi-phone",required:""},null,8,["modelValue"])],64)):E("",!0),o(f,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=r=>c.value=r),label:"Usuario","prepend-icon":"mdi-account",required:"",class:$(s.value?"":"mt-4")},null,8,["modelValue","class"]),o(f,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=r=>v.value=r),label:"Contraseña",type:"password","prepend-icon":"mdi-lock",required:""},null,8,["modelValue"])]),_:1}),o(j,{class:"d-flex justify-space-between"},{default:a(()=>[o(U,{color:"primary",onClick:e[5]||(e[5]=r=>s.value?R():S()),block:""},{default:a(()=>[b(V(s.value?"Registrar":"Entrar"),1)]),_:1})]),_:1}),o(j,{class:"justify-center"},{default:a(()=>[o(U,{text:"",onClick:I,color:"primary"},{default:a(()=>[b(V(s.value?"Volver a Iniciar Sesión":"¿No tienes cuenta? Regístrate"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Q=z(H,[["__scopeId","data-v-45b6ad32"]]);export{Q as default};
