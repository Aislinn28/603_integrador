import{u as z}from"./usuario_store-DxkInh7o.js";import{r as u,c as C,w as o,a as r,o as V,b as l,d as G,e as q,t as x,f as R,F as E}from"./index-C2aYM6LG.js";import"./http-CD2YnwdB.js";const O={__name:"RegisterView",setup(H){const U=z(),n=u(!1),d=u(""),v=u(""),b=u(""),y=u(""),g=u(""),c=u(!1),m=u(""),p=u(""),_=u(!1),f=u(""),s={required:t=>!!t||"Campo requerido",email:t=>/.+@.+\..+/.test(t)||"E-mail no válido"},N=async()=>{if(_.value=!1,c.value)try{const t={usuario:d.value,contrasenia:v.value},e=await U.login(t);m.value=e.mensaje||"Login exitoso",p.value="success",f.value="mdi-check-circle"}catch(t){m.value=t.mensaje||"Error en login",p.value="error",f.value="mdi-alert-circle"}finally{_.value=!0}},B=async()=>{if(_.value=!1,c.value)try{const t={nombre:b.value,apellidos:y.value,telefono:g.value,usuario:d.value,contrasenia:v.value},e=await U.crearUsuario(t);m.value=e.mensaje||"Usuario registrado con éxito",p.value="success",f.value="mdi-check-circle",n.value=!1}catch(t){m.value=t.mensaje||"Error en registro",p.value="error",f.value="mdi-alert-circle"}finally{_.value=!0}};return(t,e)=>{const S=r("v-toolbar-title"),F=r("v-toolbar"),I=r("v-alert"),k=r("v-card-text"),i=r("v-text-field"),T=r("v-form"),$=r("v-spacer"),w=r("v-btn"),j=r("v-card-actions"),A=r("v-card"),D=r("v-col"),L=r("v-row"),Y=r("v-container");return V(),C(Y,{class:"fill-height",fluid:""},{default:o(()=>[l(L,{justify:"center",align:"center"},{default:o(()=>[l(D,{cols:"12",sm:"8",md:"4"},{default:o(()=>[l(A,null,{default:o(()=>[l(F,{color:"primary",dark:"",flat:""},{default:o(()=>[l(S,null,{default:o(()=>[q(x(n.value?"Registrarse":"Iniciar sesión"),1)]),_:1})]),_:1}),_.value?(V(),C(k,{key:0},{default:o(()=>[l(I,{icon:f.value,text:m.value,title:"Respuesta",type:p.value},null,8,["icon","text","type"])]),_:1})):G("",!0),l(k,null,{default:o(()=>[l(T,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=a=>c.value=a)},{default:o(()=>[n.value?(V(),R(E,{key:0},[l(i,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),label:"Nombre",rules:[s.required],required:""},null,8,["modelValue","rules"]),l(i,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value=a),label:"Apellidos",rules:[s.required],required:""},null,8,["modelValue","rules"]),l(i,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),label:"Teléfono",rules:[s.required],required:""},null,8,["modelValue","rules"]),l(i,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value=a),label:"Usuario",rules:[s.required],required:""},null,8,["modelValue","rules"]),l(i,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),label:"Contraseña",type:"password",rules:[s.required],required:""},null,8,["modelValue","rules"])],64)):(V(),R(E,{key:1},[l(i,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=a=>d.value=a),label:"Usuario",rules:[s.required],required:"","prepend-icon":"mdi-user"},null,8,["modelValue","rules"]),l(i,{modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=a=>v.value=a),label:"Contraseña",type:"password",rules:[s.required],required:"","prepend-icon":"mdi-lock"},null,8,["modelValue","rules"])],64))]),_:1},8,["modelValue"])]),_:1}),l(j,null,{default:o(()=>[l($),l(w,{color:"primary",disabled:!c.value,onClick:e[8]||(e[8]=a=>n.value?B():N())},{default:o(()=>[q(x(n.value?"Registrar":"Entrar"),1)]),_:1},8,["disabled"])]),_:1}),l(j,{class:"d-flex justify-center"},{default:o(()=>[l(w,{text:"",onClick:e[9]||(e[9]=a=>n.value=!n.value)},{default:o(()=>[q(x(n.value?"¿Ya tienes cuenta? Iniciar sesión":"Registrarse"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{O as default};
