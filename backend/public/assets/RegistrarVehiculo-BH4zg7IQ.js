import{_ as T,r as p,k as g,c as z,w as t,a,u as D,o as I,b as l,e as c,t as O}from"./index-C2aYM6LG.js";import{u as P}from"./vehiculos-2rN432G1.js";import"./http-CD2YnwdB.js";const $={__name:"RegistrarVehiculo",setup(A){const v=D(),x=P(),_=p(null),u=p(!1),m=p(!1),r=g({placa:"",color:"",modelo:"",version:""}),s=g({show:!1,text:"",color:"success"}),k=[o=>!!o||"La placa es obligatoria",o=>o&&o.length>=3||"La placa debe tener al menos 3 caracteres",o=>o&&o.length<=15||"La placa no puede tener más de 15 caracteres"],w=[o=>!!o||"El color es obligatorio",o=>o&&o.length>=2||"El color debe tener al menos 2 caracteres"],y=[o=>!!o||"El modelo es obligatorio",o=>o&&o.length>=2||"El modelo debe tener al menos 2 caracteres"];async function C(){if(_.value.validate()){m.value=!0;try{await x.registrarVehiculo({placa:r.placa.toUpperCase(),color:r.color,modelo:r.modelo,version:r.version||null}),f("Vehículo registrado exitosamente","success"),setTimeout(()=>{v.push("/bienvenida")},2e3)}catch(o){console.error("Error al registrar vehículo:",o),f(o||"Error al registrar vehículo","error")}finally{m.value=!1}}}function f(o,e){s.text=o,s.color=e,s.show=!0}function V(){v.push("/bienvenida")}return(o,e)=>{const R=a("v-toolbar-title"),b=a("v-spacer"),U=a("v-icon"),i=a("v-btn"),h=a("v-toolbar"),d=a("v-text-field"),E=a("v-form"),q=a("v-card-text"),L=a("v-card-actions"),S=a("v-card"),j=a("v-snackbar"),B=a("v-col"),M=a("v-row"),N=a("v-container");return I(),z(N,{class:"fill-height",fluid:""},{default:t(()=>[l(M,{justify:"center",align:"center"},{default:t(()=>[l(B,{cols:"12",sm:"8",md:"6"},{default:t(()=>[l(S,{elevation:"12",class:"pa-6"},{default:t(()=>[l(h,{flat:"",color:"primary",dark:""},{default:t(()=>[l(R,null,{default:t(()=>e[7]||(e[7]=[c("Registrar Vehículo")])),_:1}),l(b),l(i,{icon:"",onClick:V},{default:t(()=>[l(U,null,{default:t(()=>e[8]||(e[8]=[c("mdi-arrow-left")])),_:1})]),_:1})]),_:1}),l(q,null,{default:t(()=>[l(E,{ref_key:"form",ref:_,modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=n=>u.value=n),"lazy-validation":""},{default:t(()=>[l(d,{modelValue:r.placa,"onUpdate:modelValue":e[0]||(e[0]=n=>r.placa=n),rules:k,label:"Placa del vehículo",required:"","prepend-icon":"mdi-card-text",variant:"outlined",class:"mb-3"},null,8,["modelValue"]),l(d,{modelValue:r.color,"onUpdate:modelValue":e[1]||(e[1]=n=>r.color=n),rules:w,label:"Color",required:"","prepend-icon":"mdi-palette",variant:"outlined",class:"mb-3"},null,8,["modelValue"]),l(d,{modelValue:r.modelo,"onUpdate:modelValue":e[2]||(e[2]=n=>r.modelo=n),rules:y,label:"Modelo",required:"","prepend-icon":"mdi-car",variant:"outlined",class:"mb-3"},null,8,["modelValue"]),l(d,{modelValue:r.version,"onUpdate:modelValue":e[3]||(e[3]=n=>r.version=n),label:"Versión (Opcional)","prepend-icon":"mdi-car-info",variant:"outlined",class:"mb-3"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(L,null,{default:t(()=>[l(b),l(i,{color:"grey",variant:"text",onClick:V},{default:t(()=>e[9]||(e[9]=[c(" Cancelar ")])),_:1}),l(i,{color:"primary",loading:m.value,disabled:!u.value,onClick:C},{default:t(()=>e[10]||(e[10]=[c(" Registrar Vehículo ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(j,{modelValue:s.show,"onUpdate:modelValue":e[6]||(e[6]=n=>s.show=n),color:s.color,timeout:4e3,top:""},{actions:t(()=>[l(i,{color:"white",variant:"text",onClick:e[5]||(e[5]=n=>s.show=!1)},{default:t(()=>e[11]||(e[11]=[c(" Cerrar ")])),_:1})]),default:t(()=>[c(O(s.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})]),_:1})}}},J=T($,[["__scopeId","data-v-77d876c0"]]);export{J as default};
